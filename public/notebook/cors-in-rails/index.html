<!doctype html><html><head><meta charset=utf-8><title>brendan tang</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/style.css></head><body><div class=wrapper><header class=site-header><ol class=site-navigation><li><a title="brendan tang" href=https://brendantang.net/>ğŸ’ brendan tang</a></li>â–¸<li><a title=notebook href=https://brendantang.net/notebook/>ğŸ““ notebook</a></li>â–¸<li><a title="Ruby on Rails" href=https://brendantang.net/notebook/rails/>ğŸšƒ Ruby on Rails</a></li>â–¸<li class=active><a title="Enable CORS in Rails" href=https://brendantang.net/notebook/cors-in-rails/>Enable CORS in...</a></li></ol><ul class=site-navigation><li><a title=tags href=/tags>ğŸ·</a></li><li><a title=notebook href=/notebook>ğŸ““</a></li><li><a title="my github" href=https://github.com/brendantang>ğŸ’»</a></li></ul></header><div id=content><article><h1>Enable CORS in Rails</h1><aside><time>created Saturday, Apr 24, 2021</time><br><code>last commit
<a href=https://github.com/brendantang/brendantang.net/commit/a71cc7354e9a97dea1822dfd7b62e2553f604520>a71cc73</a>
<time>Apr 24, 2021</time>
Add some Ruby notes</code></aside><p>You have to explicitly allow <strong>Cross Origin Resource Sharing</strong> to access your Rails API from another domain, like if you have a separate javascript frontend and a Rails backend.</p><p>This was the best link I found: <a href=https://medium.com/ruby-daily/understanding-cors-when-using-ruby-on-rails-as-an-api-f086dc6ffc41>https://medium.com/ruby-daily/understanding-cors-when-using-ruby-on-rails-as-an-api-f086dc6ffc41</a></p><p><code>No 'Access-Control-Allow-Origin' header is present on the requested resource.</code> is the error message you get when you try to make CORS requests without enabling it.</p><h2 id=enable-cors>Enable CORS</h2><ul><li>add <code>gem 'rack-cors'</code> to Gemfile</li><li><code>bundle install</code></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=color:#75715e># config/initializers/cors.rb</span>
<span style=color:#66d9ef>Rails</span><span style=color:#f92672>.</span>application<span style=color:#f92672>.</span>config<span style=color:#f92672>.</span>middleware<span style=color:#f92672>.</span>insert_before <span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>Rack</span><span style=color:#f92672>::</span><span style=color:#66d9ef>Cors</span> <span style=color:#66d9ef>do</span>
  allow <span style=color:#66d9ef>do</span>
    <span style=color:#75715e># Whitelist the origins that can access your API</span>
    origins <span style=color:#e6db74>&#39;http://localhost:3000&#39;</span> 

    <span style=color:#75715e># Allow CORS on all resources</span>
    resource <span style=color:#e6db74>&#39;*&#39;</span>,
      <span style=color:#e6db74>headers</span>: <span style=color:#e6db74>:any</span>,
      methods: <span style=color:#f92672>[</span><span style=color:#e6db74>:get</span><span style=color:#f92672>]</span>
  <span style=color:#66d9ef>end</span>
<span style=color:#66d9ef>end</span>
</code></pre></div></article><nav class=sidebar><h3>Tags</h3><ul><li><a href=/tags/rails/>rails</a></li></ul><hr><h3>Adjacent</h3><div><br>- - -<br></div><div><h3>Related</h3><ul><li><a href=/2020/12/activerecord-has_many-association-within-the-same-model/>ActiveRecord has_many Association Within the Same Model</a></li><li><a href=/2020/12/stop-rails-server-after-closing-the-terminal/>Stop Rails Server After Closing the Terminal</a></li><li><a href=/2020/10/resolving-sqlexception-ambiguous-column-name-in-a-rails-project/>Resolving SQLException: ambiguous column name in a Rails project</a></li></ul></div></nav></div><footer style=max-width:100%><a href=/><img style=max-width:100% src=/glasses.svg></a></footer></div></body></html>