<!doctype html><html><head><meta charset=utf-8><title>brendan tang</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/style.css></head><body><div class=wrapper><header class=site-header><a href=/>brendan tang</a><nav class=icon-tags><a title=Posts href=/technical_notes/>POSAT</a>
8
| <a title=tags href=/tags>üè∑</a></nav></header><div id=content><article><h1>Find and Replace text in all files that contain it using VIM and grep</h1><aside>2020-10-07 11:59:16 -0400 EDT</aside><p>I&rsquo;m no wizard with VIM or <code>grep</code>, so it helps me to use this post as a cheatsheet.</p><p>If I need to, for example, rename a method everywhere that it occurs in a project, I use these commands:</p><p>Recursively list all files in a given directory with matching text, then open them all in vim buffers:<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p><pre><code>vim `grep -rwl '/path/to/look/in' -e 'string_to_match'`
</code></pre><p>If you want to avoid binary files, also add the -I option. This is useful for me when grepping inside of a rails project&rsquo;s &lsquo;db&rsquo; directory but not wanting to search .sqlite files.</p><p>Once VIM is open use <code>:ls</code> to list all open buffers, <code>:b 1</code> to go to buffer 1, etc.<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p><p>Find and replace a phrase across all buffers (with confirmation):</p><pre><code>:bufdo %s/pattern/replacement/gc
</code></pre><p>Without confirmation:<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></p><pre><code>:budfo %s/pattern/replacement/ge | update
</code></pre><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p><a href=https://stackoverflow.com/a/16957078>Stack overflow answer</a> explaining the <code>grep</code> command options <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p><a href=https://vim.fandom.com/wiki/Vim_buffer_FAQ>VIM buffers reference</a> <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p><a href=https://vim.fandom.com/wiki/Search_and_replace_in_multiple_buffers>Reference</a> for find and replace across buffers <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></article><nav class=sidebar><h3>Tags</h3><ul><li>üíª <a href=/tags/technical-notes/>technical notes</a></li><li><a href=/tags/unix/>unix</a></li><li><a href=/tags/vim/>vim</a></li><li><a href=/tags/grep/>grep</a></li></ul><hr><h3>Adjacent</h3><div><br>- - -<br><a href=/technical_notes/resolving_sql_exception_ambiguous_column_name_in_rails/>Resolving SQLException: ambiguous column name in a Rails project ‚Üí</a></div></nav></div><footer style=max-width:100%><a href=/><img style=max-width:100% src=/glasses.svg></a></footer></div></body></html>